{% extends 'layout' %}

{% block content %}

<div class="columns">
  
  <div class="column course-description is-5">
    <h2 class="title">{{ room.class | classmap }} Crash Course</h2>
    <i class="tag is-primary">{{ room.date }}</i>
    <div class="text">{{ room.desc | safe }}</div>
  </div>

  <div class="column is-7" ng-app="app" ng-controller="FirebaseController as vm">
    <nav class="panel">
      <p class="panel-heading">Chat Window</p>

      <div class="panel-block messages" ng-repeat="message in vm.messages">
        <span ng-bind-html="message.$value | linkify"></span>
        {% if me %}
          <button ng-click="vm.deleteMessage(message)" class="delete"></button>
        {% endif %}
      </div>

      
      <div class="panel-block">
        {% if me %}
        <form ng-submit="vm.addMessage(vm.message)">
          <p class="control">
            <input autocomplete="off" type="text" ng-model="vm.message" class="input" />
          </p>
        </form>
        {% endif %}
      </div>
      
    </nav>
  </div>

</div>

{% endblock %}
